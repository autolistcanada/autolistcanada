<!DOCTYPE html>
<html lang="en" class="bg-beige min-h-screen">
<head>
  <meta charset="UTF-8">
  <title>AutoList Canada Listings Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- TailwindCSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Leaflet CSS/JS for Map -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    .bg-mint { background: linear-gradient(135deg, #d2fff2 0%, #b2ffe5 100%); }
    .bg-maple { background: linear-gradient(135deg, #ffe6e6 0%, #ffd6d6 100%); }
    .bg-beige { background: linear-gradient(135deg, #faf6ef 0%, #ece3d8 100%); }
    .glass {
      background: rgba(255,255,255,0.45);
      backdrop-filter: blur(9px);
      border-radius: 1.25rem;
      box-shadow: 0 4px 18px 0 rgba(0,0,0,0.09);
      border: 1px solid rgba(255,255,255,0.21);
    }
    .badge-cozy { background: #ffe6cc; color: #b36b00; }
    .badge-minimalist { background: #e0f1ff; color: #2176ae; }
    .badge-luxury { background: #fff7d6; color: #bfa100; }
    .badge-budget { background: #e9fcd7; color: #607d1b; }
    .badge-eco { background: #d3f9d8; color: #43936c; }
    .ring-blue { box-shadow: 0 0 0 3px #68a7ff; }
    .ring-green { box-shadow: 0 0 0 3px #4ade80; }
    .ring-grey { box-shadow: 0 0 0 3px #d1d5db; }
    .tooltip {
      position: absolute;
      z-index: 50;
      background: #fff;
      color: #222;
      padding: 0.5rem 0.8rem;
      border-radius: 0.5rem;
      box-shadow: 0 2px 8px #0001;
      font-size: 0.95rem;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.13s;
    }
    .show-tooltip { opacity: 1; }
    .fade-in { animation: fadein 0.2s; }
    @keyframes fadein { from { opacity: 0 } to { opacity: 1 } }
    .fade-out { animation: fadeout 0.2s; }
    @keyframes fadeout { from { opacity: 1 } to { opacity: 0 } }
    .btn-link {
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      font-weight: 600;
      transition: all 0.2s;
    }
    .btn-link.font-bold, .btn-link.active {
      border-left: 4px solid #dc2626;
      background: rgba(255,255,255,0.2);
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body class="flex bg-beige min-h-screen text-zinc-900">

<!-- Sidebar -->
<aside class="w-1/5 min-h-screen text-center p-6 flex flex-col items-center justify-start space-y-6" style="background-image: url('sidebar-background.png'); background-size: cover; background-position: center;">
  <img src="autolist-logo.png" alt="AutoList Canada Logo" class="w-32 h-32 mx-auto">
  <img src="autolist-title.png" alt="AutoList Canada Title" class="w-56 mx-auto">
  <nav class="flex flex-col gap-5 text-base mt-6 w-full items-center">
    <a href="index.html" class="btn-link">Home</a>
    <a href="dashboard.html" class="btn-link">Dashboard</a>
    <a href="listings.html" class="btn-link font-bold border-l-4 border-red-600 bg-white/20 shadow">Listings</a>
    <a href="ai-tools.html" class="btn-link">AI Tools</a>
    <a href="how-it-works.html" class="btn-link">How It Works</a>
    <a href="faq.html" class="btn-link">FAQ</a>
    <a href="import.html" class="btn-link">Listings Import</a>
    <a href="terms.html" class="btn-link text-xs text-gray-600">Terms of Service</a>
    <a href="privacy.html" class="btn-link text-xs text-gray-600">Privacy Policy</a>
  </nav>
  <div class="flex items-center justify-center mt-auto">
    <button id="lang-en" class="glass px-4 py-2 text-sm font-semibold mr-2 flex items-center gap-1 border border-transparent hover:border-mint-200" onclick="switchLanguage('en')" aria-label="English"><span>🇨🇦</span> EN</button>
    <button id="lang-fr" class="glass px-4 py-2 text-sm font-semibold flex items-center gap-1 border border-transparent hover:border-mint-200" onclick="switchLanguage('fr')" aria-label="Français"><span>🇫🇷</span> FR</button>
  </div>
</aside>
<!-- End Sidebar -->
<!-- Main Panel -->
<main class="flex-1 p-8 space-y-8">

  <!-- Top Row: Search + Platform Connections -->
  <section class="flex flex-col md:flex-row items-start md:items-center justify-between gap-6">

    <!-- Search & Filters -->
    <div class="flex flex-col md:flex-row items-start md:items-center gap-3 w-full md:w-auto">
      <input type="text" id="searchListings" placeholder="Search listings..." class="px-4 py-2 rounded-lg border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-mint focus:border-transparent w-full md:w-64">
      <select class="px-4 py-2 rounded-lg border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-maple">
        <option value="">Filter by platform</option>
        <option value="ebay">eBay</option>
        <option value="poshmark">Poshmark</option>
        <option value="facebook">Facebook Marketplace</option>
      </select>
    </div>

    <!-- Connected Marketplaces -->
    <div class="flex flex-wrap items-center gap-4">
      <button onclick="togglePlatform('ebay')" class="glass px-4 py-2 flex items-center gap-2 shadow hover:ring-green" id="connect-ebay">
        <img src="ebay-logo.png" alt="eBay" class="h-5"> <span>eBay</span>
        <span id="status-ebay" class="text-sm text-green-600 font-semibold ml-2 hidden">✅ Connected</span>
      </button>
      <button onclick="togglePlatform('poshmark')" class="glass px-4 py-2 flex items-center gap-2 shadow hover:ring-pink" id="connect-poshmark">
        <img src="poshmark-logo.png" alt="Poshmark" class="h-5"> <span>Poshmark</span>
        <span id="status-poshmark" class="text-sm text-green-600 font-semibold ml-2 hidden">✅ Connected</span>
      </button>
      <button onclick="togglePlatform('facebook')" class="glass px-4 py-2 flex items-center gap-2 shadow hover:ring-blue" id="connect-facebook">
        <img src="facebook-logo.png" alt="Facebook" class="h-5"> <span>Facebook</span>
        <span id="status-facebook" class="text-sm text-green-600 font-semibold ml-2 hidden">✅ Connected</span>
      </button>
    </div>
  </section>

  <!-- Next Sections: To be continued (Analytics, Listings Table, Psychology Map) -->
<!-- Listings Table -->
<section class="w-4/5 p-8 space-y-8">
  <div class="glass p-6 rounded-2xl shadow space-y-6">
    <h2 class="text-2xl font-semibold mb-2">Your Listings</h2>
    <div class="overflow-auto">
      <table class="min-w-full table-auto text-sm text-left">
        <thead class="bg-white/60 rounded-lg">
          <tr class="text-zinc-700 font-semibold">
            <th class="px-4 py-3">Image</th>
            <th class="px-4 py-3">Title</th>
            <th class="px-4 py-3">Actions</th>
            <th class="px-4 py-3">SKU</th>
            <th class="px-4 py-3">Price</th>
            <th class="px-4 py-3">Platforms</th>
            <th class="px-4 py-3">Tone</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-200">
          <!-- Listing Row -->
          <tr class="hover:bg-white/30 transition-all">
            <td class="px-4 py-3"><img src="thumb-placeholder.png" alt="Thumbnail" class="w-10 h-10 rounded shadow"></td>
            <td class="px-4 py-3 font-medium">Vintage Maple Leaf Coat</td>
            <td class="px-4 py-3 space-x-2 text-lg">
              <button title="Edit" class="hover:text-blue-600">✏️</button>
              <button title="Copy" class="hover:text-purple-600">📋</button>
              <button title="Delete" class="hover:text-red-600">🗑️</button>
              <button title="Sync" class="hover:text-green-600">🔄</button>
              <button title="AI Boost" class="hover:text-yellow-600">⚡</button>
            </td>
            <td class="px-4 py-3">CAN-001</td>
            <td class="px-4 py-3">$125.00</td>
            <td class="px-4 py-3 space-x-2">
              <img src="ebay-logo.png" alt="eBay" class="w-5 h-5 inline">
              <img src="poshmark-logo.png" alt="Poshmark" class="w-5 h-5 inline">
            </td>
            <td class="px-4 py-3">
              <span class="badge-cozy px-3 py-1 rounded-full text-xs font-semibold">Cozy</span>
            </td>
          </tr>
          <!-- Duplicate row below as needed -->
        </tbody>
      </table>
    </div>
  </div>
</section>
<!-- Psychology Buyer Map + Tone Logic -->
<section class="w-4/5 px-8 pb-16 space-y-10">
  <h2 class="text-xl font-semibold">Buyer Psychology Map</h2>

  <!-- Tone Legend -->
  <div class="flex flex-wrap gap-4 mb-6">
    <div class="flex items-center gap-2">
      <span class="w-4 h-4 rounded-full" style="background-color:#ffcab0;"></span>
      <span class="text-sm">Warm – Quebec 🍁</span>
    </div>
    <div class="flex items-center gap-2">
      <span class="w-4 h-4 rounded-full" style="background-color:#cbe9ff;"></span>
      <span class="text-sm">Minimalist – BC 🌲</span>
    </div>
    <div class="flex items-center gap-2">
      <span class="w-4 h-4 rounded-full" style="background-color:#fbd4ec;"></span>
      <span class="text-sm">Cozy – Prairies 🧣</span>
    </div>
    <div class="flex items-center gap-2">
      <span class="w-4 h-4 rounded-full" style="background-color:#ffeebb;"></span>
      <span class="text-sm">Luxury – Toronto 💎</span>
    </div>
    <div class="flex items-center gap-2">
      <span class="w-4 h-4 rounded-full" style="background-color:#d0f5d8;"></span>
      <span class="text-sm">Budget/Eco – Maritimes 🌊</span>
    </div>
  </div>

  <!-- Leaflet Map -->
  <div id="buyerMap" class="h-96 rounded-xl shadow-lg overflow-hidden"></div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const map = L.map('buyerMap').setView([56.1304, -106.3468], 4.2); // Canada center

      L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 12,
        attribution: '© OpenStreetMap'
      }).addTo(map);

      // -- AI Logic Start: Buyer Points --
      const buyerPoints = [
        { lat: 45.5017, lng: -73.5673, tone: 'warm', title: "Wool Coat - Montreal", trust: 4 },
        { lat: 49.2827, lng: -123.1207, tone: 'minimalist', title: "Glass Vase - Vancouver", trust: 2 },
        { lat: 50.4452, lng: -104.6189, tone: 'cozy', title: "Hand-knit Blanket - Regina", trust: 3 },
        { lat: 43.6532, lng: -79.3832, tone: 'luxury', title: "Gold Watch - Toronto", trust: 5 },
        { lat: 46.2382, lng: -63.1311, tone: 'eco', title: "Wooden Bowl - PEI", trust: 2 }
      ];

      const toneColors = {
        warm: "#ffcab0",
        minimalist: "#cbe9ff",
        cozy: "#fbd4ec",
        luxury: "#ffeebb",
        eco: "#d0f5d8"
      };

      buyerPoints.forEach(pt => {
        const radius = pt.trust * 4 + 4;
        L.circleMarker([pt.lat, pt.lng], {
          radius,
          fillColor: toneColors[pt.tone],
          fillOpacity: 0.7,
          color: "#555",
          weight: 1
        }).addTo(map).bindTooltip(`<strong>${pt.title}</strong><br>Trust: ${pt.trust}/5`);
      });
      // -- AI Logic End --
    });
  </script>
</section>
<!-- AI Suggestion Modal -->
<div id="aiModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
  <div class="glass w-full max-w-xl p-6 relative rounded-2xl">
    <button onclick="closeAIModal()" class="absolute top-2 right-3 text-xl font-bold text-gray-700">×</button>
    <h3 class="text-lg font-semibold mb-4">AI Suggestion Panel</h3>
    <label class="block mb-2 text-sm font-medium">Input:</label>
    <textarea id="aiInput" class="w-full p-3 rounded-lg border border-gray-300 mb-4" rows="3" placeholder="Paste current title/desc/tags..."></textarea>
    <button onclick="runAISuggestion()" class="bg-red-500 hover:bg-red-600 text-white font-semibold px-4 py-2 rounded-lg mb-4">Run AI Suggestion</button>
    <div class="bg-white p-4 rounded-lg shadow-inner border text-sm" id="aiOutput">Your AI-enhanced result will appear here...</div>
  </div>
</div>

<script>
  function openAIModal(inputText = '') {
    document.getElementById('aiInput').value = inputText;
    document.getElementById('aiOutput').textContent = "Your AI-enhanced result will appear here...";
    document.getElementById('aiModal').classList.remove('hidden');
  }

  function closeAIModal() {
    document.getElementById('aiModal').classList.add('hidden');
  }

  function runAISuggestion() {
    const input = document.getElementById('aiInput').value;
    const output = `🧠 Enhanced Result:\n"${input}"\n(Optimized by AutoList AI)`;
    document.getElementById('aiOutput').textContent = output;
  }
</script>
<!-- Listings Table -->
<section class="w-4/5 p-8 space-y-6" id="listings">
  <h2 class="text-2xl font-bold mb-4">Your Listings</h2>

  <!-- Example Listing Row -->
  <div class="glass flex items-center justify-between p-4 rounded-xl shadow hover:shadow-md transition">
    <div class="flex items-center gap-4">
      <img src="listing1.jpg" alt="Wool Coat" class="w-20 h-20 object-cover rounded-lg">
      <div>
        <h3 class="text-lg font-semibold">Vintage Wool Coat</h3>
        <p class="text-sm text-gray-600">$78.00 CAD</p>
        <div class="flex gap-2 mt-2">
          <span class="badge-cozy px-2 py-1 rounded text-xs">Cozy</span>
          <span class="text-xs text-gray-500">ID: #0001</span>
        </div>
      </div>
    </div>
    <div class="flex gap-4 items-center">
      <img src="ebay-logo.png" alt="eBay" class="h-5">
      <img src="poshmark-logo.png" alt="Poshmark" class="h-5">
      <img src="facebook-logo.png" alt="Facebook" class="h-5">
    </div>
    <div class="flex flex-col items-end gap-2">
      <button onclick="openAIModal('Vintage Wool Coat')" class="text-blue-600 underline text-sm">AI Suggest Title</button>
      <button onclick="openAIModal('Great condition. Worn twice.')" class="text-green-600 underline text-sm">Fix Description</button>
    </div>
  </div>

  <!-- Duplicate ↑ 9 times below with varied content (can be simulated for now) -->
</section>
<!-- Filter & View Controls -->
<section class="w-4/5 px-8 py-4 flex justify-between items-center">
  <div class="flex gap-4">
    <select id="intentFilter" class="glass px-3 py-2 rounded-lg text-sm" onchange="filterByIntent()">
      <option value="">All Buyer Intents</option>
      <option value="Luxury">Luxury</option>
      <option value="Budget">Budget</option>
      <option value="Nostalgia">Nostalgia</option>
      <option value="Minimalist">Minimalist</option>
      <option value="Cozy">Cozy</option>
    </select>
    <label class="flex items-center gap-2 text-sm">
      <input type="checkbox" id="hideSoldToggle" class="accent-red-500" onchange="toggleHideSold()"> Hide Sold
    </label>
  </div>
  <div class="flex gap-3">
    <button onclick="setView('grid')" class="glass px-3 py-2 text-sm">🔲 Grid View</button>
    <button onclick="setView('list')" class="glass px-3 py-2 text-sm">📋 List View</button>
  </div>
</section>

<!-- Footer Trust Badges -->
<footer class="w-full text-center py-8 mt-12 bg-opacity-10 bg-white rounded-t-3xl shadow-inner">
  <div class="flex justify-center gap-8 items-center">
    <img src="canadian-owned-badge.png" alt="Canadian Owned" class="h-12">
    <img src="ai-powered-tools-badge.png" alt="AI Powered" class="h-12">
    <img src="privacy-first-badge.png" alt="Privacy First" class="h-12">
  </div>
  <p class="text-sm text-gray-600 mt-4">AutoList Canada © 2025 — Built with trust, science, and Canadian soul 🇨🇦</p>
</footer>
<script>
function filterByIntent() {
  const intent = document.getElementById("intentFilter").value.toLowerCase();
  document.querySelectorAll("#listings > div").forEach(row => {
    row.style.display = intent === "" || row.innerHTML.toLowerCase().includes(intent) ? "flex" : "none";
  });
}

function toggleHideSold() {
  const hideSold = document.getElementById("hideSoldToggle").checked;
  document.querySelectorAll("#listings > div").forEach(row => {
    const isSold = row.innerHTML.toLowerCase().includes("sold");
    if (hideSold && isSold) {
      row.style.display = "none";
    } else if (!hideSold && row.style.display === "none") {
      // re-check intent before showing
      const intent = document.getElementById("intentFilter").value.toLowerCase();
      const matchesIntent = intent === "" || row.innerHTML.toLowerCase().includes(intent);
      row.style.display = matchesIntent ? "flex" : "none";
    }
  });
}

function setView(mode) {
  const listings = document.getElementById("listings");
  listings.classList.toggle("grid", mode === "grid");
  listings.classList.toggle("flex", mode === "list");
  listings.classList.toggle("flex-col", mode === "list");
}

function openAIModal(message) {
  alert("🧠 AI Suggestion:\n\n" + message + "\n\n(Interactive modals coming soon!)");
}
</script>

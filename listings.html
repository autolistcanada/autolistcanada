<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AutoList Canada – Listings</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-image: url('listings-background.png');
      background-size: cover;
      background-repeat: no-repeat;
      background-attachment: fixed;
    }
    .sidebar {
      background-image: url('sidebar-background.png');
      background-size: cover;
      overflow-y: auto;
    }
    .footer-font {
      font-family: 'Patrick Hand', 'Courier New', Courier, monospace;
    }
    .tooltip-content {
      display: none;
      position: absolute;
      top: 100%;
      left: 0;
      z-index: 10;
      background-color: white;
      border: 1px solid #ddd;
      border-radius: 0.375rem;
      padding: 0.5rem;
      min-width: 120px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    .platforms-tooltip:hover .tooltip-content {
      display: block;
    }
    .divider-line {
      height: 1px;
      background-color: #aaa;
      opacity: 0.3;
      margin-top: 1rem;
      margin-bottom: 0.5rem;
    }
    .row-grid {
      background-image: linear-gradient(to bottom, rgba(255,255,255,0.05) 1px, transparent 1px);
      background-size: 100% 48px;
    }
  </style>
</head>
<body class="flex text-gray-900">

<!-- Sidebar -->
<aside class="w-64 h-screen sticky top-0 sidebar text-white flex flex-col justify-between">
  <div>
    <div class="flex items-center justify-center py-6">
      <img src="autolist-logo.png" alt="Logo" class="h-12 mr-2">
      <img src="autolist-title.png" alt="AutoList Canada Title" class="h-8">
    </div>
    <nav class="pl-6 space-y-4 text-sm">
      <a href="index.html" class="flex items-center gap-2 hover:underline"><span>🏠</span> Home</a>
      <a href="dashboard.html" class="flex items-center gap-2 hover:underline"><span>📊</span> Dashboard</a>
      <a href="listings.html" class="flex items-center gap-2 font-bold underline text-yellow-300"><span>📋</span> Listings</a>
      <a href="ai-tools.html" class="flex items-center gap-2 hover:underline"><span>🧠</span> AI Tools</a>
      <a href="#how-it-works" class="flex items-center gap-2 hover:underline"><span>🧭</span> How it Works</a>
      <a href="#faq" class="flex items-center gap-2 hover:underline"><span>❓</span> FAQ</a>
      <a href="#import" class="flex items-center gap-2 hover:underline"><span>⬇️</span> Listing Import</a>
      <a href="terms.html" class="flex items-center gap-2 hover:underline"><span>📜</span> Terms & Service</a>
      <a href="privacy.html" class="flex items-center gap-2 hover:underline"><span>🛡️</span> Privacy / Legal</a>
    </nav>
  </div>
</aside>

<!-- Main content -->
<main class="flex-1 p-6 bg-opacity-90 overflow-x-auto">
  <div class="flex justify-end mb-2">
    <button onclick="toggleLanguage()" class="text-sm underline">Français / English</button>
  </div>

  <div class="flex items-center justify-between">
    <div>
      <h1 class="text-3xl font-extrabold" id="header-title">Your Listings 👋</h1>
      <p class="text-md mt-1" id="header-sub">Welcome back, <strong>VintageCollect‑5</strong></p>
    </div>
    <div class="flex gap-3">
      <button id="analytics" class="bg-green-100 text-green-900 px-3 py-1 rounded-md text-sm font-medium">Sales Psychology Analytics</button>
      <button id="market" class="bg-blue-100 text-blue-900 px-3 py-1 rounded-md text-sm font-medium">World Market Mapping</button>
    </div>
  </div>

  <div class="mt-6 flex flex-wrap items-center justify-between gap-3">
    <div class="flex gap-2 flex-wrap">
      <button class="px-3 py-1 bg-white border rounded" id="statusBtn">Status</button>
      <input id="searchInput" onkeyup="filterListings()" type="text" placeholder="Search..." class="px-3 py-1 border rounded focus:outline-none" />
      <select class="px-3 py-1 border rounded" onchange="setItemsPerPage(this.value)">
        <option>5</option>
        <option>10</option>
      </select>
      <span class="px-2 py-1 text-sm" id="paginationLabel">1 of 2</span>
      <button class="px-3 py-1 bg-white border rounded" id="hideDraft">Hide Draft</button>
      <button class="px-3 py-1 bg-white border rounded" id="hideSold">Hide Sold</button>
    </div>
    <div class="flex gap-2">
      <button class="px-3 py-1 bg-white border rounded" id="customize">Customize</button>
      <button class="px-3 py-1 bg-white border rounded" id="bulkEdit">Bulk Edit</button>
    </div>
  </div>

  <div class="overflow-x-auto bg-yellow-100 mt-6 rounded-lg shadow row-grid">
    <table class="min-w-full table-auto">
      <thead class="bg-yellow-200">
        <tr class="text-left text-gray-800 border-b border-yellow-300">
          <th class="px-4 py-3">Image</th>
          <th class="px-4 py-3 border-l border-yellow-400">Title</th>
          <th class="px-4 py-3 border-l border-yellow-400">Actions</th>
          <th class="px-4 py-3 border-l border-yellow-400">SKU</th>
          <th class="px-4 py-3 border-l border-yellow-400">Price</th>
          <th class="px-4 py-3 border-l border-yellow-400">Platforms</th>
        </tr>
      </thead>
      <tbody id="listingTable"></tbody>
    </table>
  </div>

  <div class="flex justify-center mt-4 gap-3">
    <button onclick="prevPage()" class="px-3 py-1 bg-white border rounded">Previous</button>
    <button onclick="nextPage()" class="px-3 py-1 bg-white border rounded">Next</button>
  </div>

  <div class="text-center text-sm italic mt-6 text-gray-600">
    Browser Extension Sync Slots: <span class="text-gray-400">Reserved — Extension Module Pending Activation</span>
  </div>

  <footer class="mt-8 text-center footer-font">
    <div class="divider-line"></div>
    <div class="flex justify-between px-4 py-2 text-sm text-black relative">
      <div>🌱 Misc Adjust AI
        <span class="absolute text-xs text-gray-600 left-0 ml-28 mt-1 italic">Connects and puts in user's inventory using our technology.</span>
      </div>
      <div>Our Tools For Listing Dashboard — AI</div>
    </div>
    <div class="text-xs mt-2">All Rights Reserved. AutoList Canada 2025</div>
  </footer>
</main>

<script>
let currentPage = 1;
let itemsPerPage = 5;
let listings = [];

async function fetchFromEbay() {
  try {
    const response = await fetch("https://api.ebay.com/sell/inventory/v1/inventory_item?limit=10", {
      headers: {
        Authorization: "Bearer EBAY_TOKEN"
      }
    });
    const data = await response.json();
    listings = data.inventoryItems || []; // Adjust field name if needed
  } catch (error) {
    console.error("eBay fetch error:", error);
  }
  displayListings();
}

function displayListings() {
  const tbody = document.getElementById("listingTable");
  tbody.innerHTML = '';
  const start = (currentPage - 1) * itemsPerPage;
  const pageListings = listings.slice(start, start + itemsPerPage);
  pageListings.forEach(item => {
    const img = item.imageUrls?.[0] || "https://via.placeholder.com/80";
    const title = item.product?.title || item.sku || "Untitled";
    const sku = item.sku;
    const price = item.product?.aspects?.Price?.[0] || "$0.00";

    tbody.innerHTML += `
      <tr class="hover:bg-orange-100 border-t border-yellow-200">
        <td class="px-4 py-2"><img src="${img}" alt="${title}" class="w-16 h-16 object-cover" /></td>
        <td class="px-4 py-2 border-l border-yellow-300"><a href="edit.html?sku=${sku}" class="hover:underline text-blue-800">${title}</a></td>
        <td class="px-4 py-2 border-l border-yellow-300">
          <button onclick="logAction('edit')">✏️</button>
          <button onclick="logAction('relist')">🔁</button>
          <button onclick="logAction('delist')">⛔️</button>
          <button onclick="logAction('duplicate')">🧬</button>
          <span class="text-sm text-gray-400 ml-2 italic">Reserved for AI Tools</span>
        </td>
        <td class="px-4 py-2 border-l border-yellow-300">${sku}</td>
        <td class="px-4 py-2 border-l border-yellow-300">${price}</td>
        <td class="px-4 py-2 border-l border-yellow-300 relative">
          <a href="https://www.ebay.ca/str/vintagecollect5" target="_blank" class="text-blue-600 underline">eBay</a>
          <div class="platforms-tooltip inline-block ml-2 cursor-pointer relative">
            +4
            <div class="tooltip-content mt-2 text-black">
              <div>🛍️ Etsy</div>
              <div>🛒 Shopify</div>
              <div>👗 Poshmark</div>
              <div>🎯 Depop</div>
            </div>
          </div>
        </td>
      </tr>`;
  });
  document.getElementById("paginationLabel").innerText = `${currentPage} of ${Math.ceil(listings.length / itemsPerPage)}`;
}

function prevPage() { if (currentPage > 1) currentPage--; displayListings(); }
function nextPage() { if (currentPage * itemsPerPage < listings.length) currentPage++; displayListings(); }
function setItemsPerPage(val) { itemsPerPage = parseInt(val); currentPage = 1; displayListings(); }
function logAction(action) { alert("Performed: " + action); }
function filterListings() { displayListings(); }
function toggleLanguage() {
  const isFrench = document.getElementById("header-title").innerText.includes("Vos");
  document.getElementById("header-title").innerText = isFrench ? "Your Listings 👋" : "Vos Annonces 👋";
  document.getElementById("header-sub").innerText = isFrench ? "Welcome back, VintageCollect‑5" : "Bon retour, VintageCollect‑5";
  document.getElementById("analytics").innerText = isFrench ? "Sales Psychology Analytics" : "Psychologie des Ventes";
  document.getElementById("market").innerText = isFrench ? "World Market Mapping" : "Cartographie Marché";
  document.getElementById("statusBtn").innerText = isFrench ? "Status" : "Statut";
  document.getElementById("hideDraft").innerText = isFrench ? "Hide Draft" : "Cacher Brouillon";
  document.getElementById("hideSold").innerText = isFrench ? "Hide Sold" : "Cacher Vendu";
  document.getElementById("customize").innerText = isFrench ? "Customize" : "Personnaliser";
  document.getElementById("bulkEdit").innerText = isFrench ? "Bulk Edit" : "Édition en Masse";
}

// Boot
fetchFromEbay();
</script>
</body>
</html>

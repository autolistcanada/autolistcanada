<!DOCTYPE html>
<html lang="en" class="bg-gray-100 font-sans antialiased">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Listings Dashboard ‚Äì AutoList Canada</title>
  <link rel="icon" type="image/png" href="sidebar-background.png">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Custom scrollbar for sidebar */
    ::-webkit-scrollbar { width: 8px; background: #f1f5f9; }
    ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 8px; }
    /* Hide number arrows in input */
    input[type=number]::-webkit-inner-spin-button,
    input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
    /* Modal background blur */
    .modal-bg { backdrop-filter: blur(3px); }
    /* Tooltips */
    .tooltip {
      position: relative;
      cursor: pointer;
    }
    .tooltip .tooltiptext {
      visibility: hidden;
      width: max-content;
      background-color: #111827;
      color: #fff;
      text-align: center;
      border-radius: 6px;
      padding: 6px 12px;
      position: absolute;
      z-index: 10;
      bottom: 125%;
      left: 50%;
      transform: translateX(-50%);
      opacity: 0;
      transition: opacity 0.2s;
      font-size: 0.875rem;
      pointer-events: none;
      white-space: nowrap;
    }
    .tooltip:hover .tooltiptext { visibility: visible; opacity: 1; }
  </style>
</head>
<body class="relative min-h-screen flex bg-gray-100">

  <!-- Sidebar -->
  <aside id="sidebar" class="fixed top-0 left-0 z-30 h-full w-64 bg-gray-900 text-white shadow-lg flex flex-col transition-all duration-200
    bg-cover bg-left-bottom" style="background-image: url('sidebar-background.png');">
    <div class="flex flex-col items-center pt-8 pb-4">
      <img src="logo.png" alt="AutoList Canada Logo" class="w-12 h-12 mb-2 rounded shadow" />
      <img src="title.png" alt="AutoList Canada" class="w-40 h-auto mb-6" />
    </div>
    <nav class="flex-1 px-4">
      <ul class="space-y-1">
        <li>
          <a href="#" class="flex items-center px-4 py-2 rounded transition hover:bg-gray-800">
            <span class="mr-3">üè†</span> HOME
          </a>
        </li>
        <li>
          <a href="#" class="flex items-center px-4 py-2 rounded transition hover:bg-gray-800">
            <span class="mr-3">üìä</span> Dashboard
          </a>
        </li>
        <li>
          <a href="#" class="flex items-center px-4 py-2 rounded bg-gray-800 font-semibold shadow-inner">
            <span class="mr-3">üìã</span> Listings
          </a>
        </li>
        <li>
          <a href="#" class="flex items-center px-4 py-2 rounded transition hover:bg-gray-800">
            <span class="mr-3">ü§ñ</span> AI Tools
          </a>
        </li>
        <li>
          <a href="#" class="flex items-center px-4 py-2 rounded transition hover:bg-gray-800">
            <span class="mr-3">‚ùì</span> How It Works
          </a>
        </li>
        <li>
          <a href="#" class="flex items-center px-4 py-2 rounded transition hover:bg-gray-800">
            <span class="mr-3">üìù</span> FAQ
          </a>
        </li>
        <li>
          <a href="#" class="flex items-center px-4 py-2 rounded transition hover:bg-gray-800">
            <span class="mr-3">‚¨áÔ∏è</span> Listing Import
          </a>
        </li>
        <li>
          <a href="#" class="flex items-center px-4 py-2 rounded transition hover:bg-gray-800">
            <span class="mr-3">üìú</span> Terms & Service
          </a>
        </li>
        <li>
          <a href="#" class="flex items-center px-4 py-2 rounded transition hover:bg-gray-800">
            <span class="mr-3">‚öñÔ∏è</span> Privacy / Legal
          </a>
        </li>
      </ul>
    </nav>
    <div class="mt-auto flex flex-col items-center pb-6">
      <button id="sidebar-collapse" class="lg:hidden mt-2 px-3 py-1 text-sm rounded bg-gray-800/80 hover:bg-gray-700/90">
        ‚ò∞
      </button>
    </div>
  </aside>

  <!-- Main Content -->
  <div class="flex-1 flex flex-col min-h-screen ml-0 lg:ml-64 transition-all duration-200">

    <!-- Top Header Bar -->
    <header class="sticky top-0 z-20 bg-white/70 backdrop-blur border-b border-gray-200 flex flex-col shadow-sm">
      <div class="flex items-center justify-between px-4 py-3">
        <div>
          <h1 class="text-2xl font-bold tracking-tight text-gray-900">Your Listings</h1>
          <p class="text-sm text-gray-500">Welcome back, <span id="userName">User</span>! Syncing across marketplaces.</p>
        </div>
        <div class="flex items-center space-x-3">
          <!-- Search bar -->
          <div class="flex items-center bg-gray-100 border border-gray-300 rounded-md px-2 py-1">
            <svg class="w-5 h-5 text-gray-400 mr-1" fill="none" stroke="currentColor" stroke-width="2"
                 viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg>
            <input id="searchInput" type="text" placeholder="Search listings..."
                   class="bg-transparent outline-none text-sm w-32 md:w-48" oninput="filterListings()"/>
          </div>
          <!-- EN/FR toggle -->
          <button id="langToggle"
                  class="px-2 py-1 rounded border border-gray-300 text-gray-700 text-sm hover:bg-gray-50 transition"
                  title="Toggle Language">EN / FR</button>
          <!-- Customize (column selector) -->
          <button onclick="alert('Column customization coming soon!')"
                  class="px-2 py-1 rounded border border-gray-300 text-gray-700 text-sm hover:bg-gray-50 transition"
                  title="Customize columns">Customize</button>
          <!-- Bulk Edit -->
          <button onclick="alert('Bulk edit coming soon!')"
                  class="px-2 py-1 rounded border border-gray-300 text-gray-700 text-sm hover:bg-gray-50 transition"
                  title="Bulk edit selected listings">Bulk Edit</button>
          <!-- Pagination -->
          <div class="flex items-center ml-2 space-x-1">
            <button onclick="prevPage()" class="text-gray-500 hover:text-gray-800 px-1" title="Previous page">&lt;</button>
            <span id="paginationStatus" class="text-xs text-gray-700">1 of 1</span>
            <button onclick="nextPage()" class="text-gray-500 hover:text-gray-800 px-1" title="Next page">&gt;</button>
          </div>
        </div>
      </div>
      <!-- Status Filters -->
      <div class="flex items-center px-4 py-2 bg-gray-50 border-t border-gray-100 space-x-4 overflow-x-auto text-sm">
        <div class="flex items-center gap-2">
          <button class="status-filter px-2 py-1 rounded hover:bg-blue-100 active:bg-blue-200 text-blue-700 font-semibold bg-blue-50"
                  data-status="all" onclick="setStatusFilter('all')">All</button>
          <button class="status-filter px-2 py-1 rounded hover:bg-blue-100" data-status="active" onclick="setStatusFilter('active')">Active</button>
          <button class="status-filter px-2 py-1 rounded hover:bg-blue-100" data-status="draft" onclick="setStatusFilter('draft')">Draft</button>
          <button class="status-filter px-2 py-1 rounded hover:bg-blue-100" data-status="unlisted" onclick="setStatusFilter('unlisted')">Unlisted</button>
          <button class="status-filter px-2 py-1 rounded hover:bg-blue-100" data-status="sold" onclick="setStatusFilter('sold')">Sold</button>
          <button class="status-filter px-2 py-1 rounded hover:bg-blue-100" data-status="issues" onclick="setStatusFilter('issues')">Issues</button>
        </div>
        <label class="flex items-center ml-4 gap-2">
          <input id="hideSold" type="checkbox" class="rounded focus:ring-blue-400" onchange="toggleHide('sold')" />
          <span>Hide Sold</span>
        </label>
        <label class="flex items-center gap-2">
          <input id="hideDraft" type="checkbox" class="rounded focus:ring-blue-400" onchange="toggleHide('draft')" />
          <span>Hide Draft</span>
        </label>
      </div>
    </header>

    <!-- Table Section -->
    <main class="flex-1 overflow-x-auto p-2 sm:p-6">
      <div class="bg-white rounded shadow-lg overflow-hidden">
        <table class="min-w-full divide-y divide-gray-200 text-sm">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-3 py-2 w-8"><input type="checkbox" id="selectAll" onclick="toggleSelectAll(this)"/></th>
              <th class="px-3 py-2 w-16">Image</th>
              <th class="px-3 py-2 text-left cursor-pointer">Title</th>
              <th class="px-3 py-2 w-32">Actions</th>
              <th class="px-3 py-2 w-20">SKU</th>
              <th class="px-3 py-2 w-24">Price</th>
              <th class="px-3 py-2 w-44">Platforms</th>
            </tr>
          </thead>
          <tbody id="listingsTable" class="divide-y divide-gray-100">
            <!-- JS populates rows here -->
          </tbody>
        </table>
      </div>
    </main>

    <!-- Footer -->
    <footer class="w-full py-4 px-4 bg-cover bg-center flex items-center justify-between text-xs text-gray-700 font-medium"
            style="background-image: url('listings-background.png'); background-blend-mode:soft-light;">
      <span>Misc Adjustments AI</span>
      <span class="text-center">All Rights Reserved</span>
      <span>Our Tools for Listing Dashboard</span>
    </footer>
  </div>

  <!-- Modal (hidden by default) -->
  <div id="modalBg" class="fixed inset-0 bg-black/40 modal-bg z-50 hidden items-center justify-center">
    <div id="listingModal"
         class="bg-white rounded shadow-2xl p-6 max-w-3xl w-full mx-4 flex flex-col gap-4 relative">
      <button onclick="closeModal()" class="absolute top-3 right-3 bg-gray-200 hover:bg-gray-300 rounded-full w-8 h-8 flex items-center justify-center">
        <span class="text-lg font-bold text-gray-700">&times;</span>
      </button>
      <div id="modalImages" class="grid grid-cols-3 gap-2 mb-4">
        <!-- images injected here -->
      </div>
      <div class="flex flex-col md:flex-row gap-4">
        <div class="flex-1">
          <h2 id="modalTitle" class="text-xl font-bold mb-2"></h2>
          <div class="text-gray-600 mb-1"><span id="modalSKU"></span> &bull; <span id="modalPrice"></span> &bull; <span id="modalQty"></span></div>
          <div id="modalPlatforms" class="flex gap-2 mb-2"></div>
        </div>
        <div class="flex flex-col gap-2 w-48">
          <button class="bg-blue-700 hover:bg-blue-800 text-white px-4 py-2 rounded shadow-sm transition">Crosslist</button>
          <button class="bg-gray-100 hover:bg-gray-200 text-gray-900 px-4 py-2 rounded shadow-sm transition">Edit</button>
          <button class="bg-gray-100 hover:bg-gray-200 text-gray-900 px-4 py-2 rounded shadow-sm transition">Duplicate</button>
          <button class="bg-green-100 hover:bg-green-200 text-green-800 px-4 py-2 rounded shadow-sm transition">New Listing</button>
        </div>
      </div>
    </div>
  </div>

  <!-- AI Suggestion Modal (inline suggestion tooltips) -->
  <div id="aiSuggestionTooltip" class="fixed z-50 text-sm text-gray-700 bg-white border border-blue-200 rounded shadow-lg px-4 py-2 hidden"></div>

  <!-- SVG ICONS -->
  <svg style="display:none;">
    <symbol id="ebay" viewBox="0 0 20 20"><circle cx="10" cy="10" r="8" fill="#e53238"/></symbol>
    <symbol id="etsy" viewBox="0 0 20 20"><circle cx="10" cy="10" r="8" fill="#f1641e"/></symbol>
    <symbol id="shopify" viewBox="0 0 20 20"><circle cx="10" cy="10" r="8" fill="#95bf47"/></symbol>
    <symbol id="depop" viewBox="0 0 20 20"><rect x="3" y="6" width="14" height="8" rx="2" fill="#ff2a2a"/></symbol>
    <symbol id="poshmark" viewBox="0 0 20 20"><circle cx="10" cy="10" r="8" fill="#5d162f"/></symbol>
    <symbol id="check" viewBox="0 0 20 20"><polyline points="5 10 9 14 15 6" fill="none" stroke="#22c55e" stroke-width="2"/></symbol>
    <symbol id="cross" viewBox="0 0 20 20"><line x1="6" y1="6" x2="14" y2="14" stroke="#ef4444" stroke-width="2"/><line x1="14" y1="6" x2="6" y2="14" stroke="#ef4444" stroke-width="2"/></symbol>
    <symbol id="sync" viewBox="0 0 20 20"><circle cx="10" cy="10" r="7" stroke="#fbbf24" stroke-width="2" fill="none"/><path d="M10 3v4m0 6v4m7-7h-4m-6 0H3" stroke="#fbbf24" stroke-width="2"/></symbol>
  </svg>

  <!-- Script Section -->
  <script>
    // SIMULATED DATA
    const listings = [
      {
        title: "Marx Toys Western Cowboy Figure Set, 1960s Era",
        sku: "00122",
        price: 99.99,
        image: "images/cowboy-figures.jpg",
        platforms: ["eBay", "Poshmark"],
        status: 'active',
        qty: 1,
        images: [
          "images/cowboy-figures.jpg","images/cowboy-figures.jpg","images/cowboy-figures.jpg",
          "images/cowboy-figures.jpg","images/cowboy-figures.jpg","images/cowboy-figures.jpg",
          "images/cowboy-figures.jpg","images/cowboy-figures.jpg","images/cowboy-figures.jpg"
        ]
      },
      {
        title: "Mini-Sew Hand-Operated Sewing Machine ‚Äì 1960s",
        sku: "00126",
        price: 49.99,
        image: "images/sewing-machine.jpg",
        platforms: ["eBay", "Poshmark"],
        status: 'draft',
        qty: 2,
        images: [
          "images/sewing-machine.jpg","images/sewing-machine.jpg","images/sewing-machine.jpg",
          "images/sewing-machine.jpg","images/sewing-machine.jpg","images/sewing-machine.jpg",
          "images/sewing-machine.jpg","images/sewing-machine.jpg","images/sewing-machine.jpg"
        ]
      },
      {
        title: "1980s Cabbage Patch Kids Watch ‚Äì Regal Toy Sealed MOC",
        sku: "00127",
        price: 70.00,
        image: "images/cabbage-watch.jpg",
        platforms: ["eBay", "Poshmark"],
        status: 'active',
        qty: 1,
        images: [
          "images/cabbage-watch.jpg","images/cabbage-watch.jpg","images/cabbage-watch.jpg",
          "images/cabbage-watch.jpg","images/cabbage-watch.jpg","images/cabbage-watch.jpg",
          "images/cabbage-watch.jpg","images/cabbage-watch.jpg","images/cabbage-watch.jpg"
        ]
      }
    ];
    // Simulate platform status per row
    const allPlatforms = ["eBay", "Etsy", "Shopify", "Depop", "Poshmark"];
    // To simulate sync status, randomize for demo
    function getPlatformStatus(listing, platform) {
      if (listing.platforms.includes(platform)) {
        // Simulate synced for eBay, syncing for Poshmark
        if (platform === "eBay") return {icon: "check", tip: "Last synced: 3h ago"};
        if (platform === "Poshmark") return {icon: "sync", tip: "Syncing... (Last: 2m ago)"};
        return {icon: "check", tip: "Last synced: 1h ago"};
      }
      return {icon: "cross", tip: "Not listed"};
    }
    // PAGINATION
    let currentPage = 1;
    const perPage = 10;
    let filteredListings = [...listings];

    // FILTERING STATE
    let statusFilter = "all";
    let hideSold = false;
    let hideDraft = false;

    // RENDER LISTINGS TABLE
    function renderListings() {
      const table = document.getElementById('listingsTable');
      table.innerHTML = '';
      // Apply search and status filters
      let rows = filteredListings.filter(l => {
        if (statusFilter !== "all" && l.status !== statusFilter) return false;
        if (hideSold && l.status === 'sold') return false;
        if (hideDraft && l.status === 'draft') return false;
        return true;
      });
      // Pagination
      const totalPages = Math.max(1, Math.ceil(rows.length / perPage));
      currentPage = Math.min(currentPage, totalPages);
      const start = (currentPage - 1) * perPage;
      const pageRows = rows.slice(start, start + perPage);
      // Table rows
      for (let [idx, listing] of pageRows.entries()) {
        const tr = document.createElement('tr');
        tr.className = (listing.status === 'draft' ? 'bg-yellow-50' : '') + (listing.status === 'sold' ? 'opacity-60 line-through' : '');
        tr.innerHTML = `
          <td class="px-3 py-2 text-center"><input type="checkbox" class="rowCheckbox"/></td>
          <td class="px-3 py-2"><img src="${listing.image}" alt="" class="w-12 h-12 object-cover rounded shadow" /></td>
          <td class="px-3 py-2">
            <button class="text-blue-700 font-semibold hover:underline" onclick="openModal(${start + idx})">${listing.title}</button>
          </td>
          <td class="px-3 py-2 flex gap-2">
            <button class="tooltip" onclick="aiSuggest(this, ${start + idx})">
              <span class="text-yellow-500">‚ö°</span>
              <span class="tooltiptext">AI Suggest</span>
            </button>
            <button class="tooltip" onclick="editListing(${start + idx})">
              <span>‚úèÔ∏è</span>
              <span class="tooltiptext">Edit</span>
            </button>
            <button class="tooltip" onclick="duplicateListing(${start + idx})">
              <span>üìÑ</span>
              <span class="tooltiptext">Duplicate</span>
            </button>
            <button class="tooltip" onclick="deleteListing(${start + idx})">
              <span>üóëÔ∏è</span>
              <span class="tooltiptext">Delete</span>
            </button>
          </td>
          <td class="px-3 py-2 text-center">${listing.sku}</td>
          <td class="px-3 py-2 text-right font-semibold">$${listing.price.toFixed(2)} <span class="text-xs font-normal text-gray-400">CAD</span></td>
          <td class="px-3 py-2">
            <div class="flex gap-2 items-center">
              ${allPlatforms.map(platform => {
                const {icon, tip} = getPlatformStatus(listing, platform);
                return `<span class="tooltip" onclick="handlePlatformClick('${platform}')">
                  <svg class="inline w-6 h-6 -mb-1" aria-label="${platform}">
                    <use xlink:href="#${platform.toLowerCase()}"/>
                  </svg>
                  <svg class="w-4 h-4 absolute -ml-5 mt-4"><use xlink:href="#${icon}"/></svg>
                  <span class="tooltiptext">${platform}: ${tip}</span>
                </span>`;
              }).join('')}
            </div>
          </td>
        `;
        table.appendChild(tr);
      }
      // Pagination status
      document.getElementById('paginationStatus').textContent = `${currentPage} of ${totalPages}`;
    }
    // FILTER LOGIC
    function filterListings() {
      const q = document.getElementById("searchInput").value.toLowerCase();
      filteredListings = listings.filter(l =>
        l.title.toLowerCase().includes(q) ||
        l.sku.toLowerCase().includes(q) ||
        String(l.price).includes(q)
      );
      currentPage = 1;
      renderListings();
    }
    function setStatusFilter(status) {
      statusFilter = status;
      document.querySelectorAll('.status-filter').forEach(btn =>
        btn.classList.toggle('bg-blue-50', btn.dataset.status === status)
      );
      renderListings();
    }
    function toggleHide(type) {
      if (type === 'sold') hideSold = document.getElementById('hideSold').checked;
      if (type === 'draft') hideDraft = document.getElementById('hideDraft').checked;
      renderListings();
    }
    // PAGINATION CONTROLS
    function nextPage() { currentPage++; renderListings(); }
    function prevPage() { if (currentPage > 1) currentPage--; renderListings(); }
    // SELECT ALL
    function toggleSelectAll(checkbox) {
      document.querySelectorAll('.rowCheckbox').forEach(cb => cb.checked = checkbox.checked);
    }

    // MODAL LOGIC
    function openModal(idx) {
      const listing = filteredListings[idx];
      document.getElementById('modalTitle').textContent = listing.title;
      document.getElementById('modalSKU').textContent = 'SKU: ' + listing.sku;
      document.getElementById('modalPrice').textContent = '$' + listing.price.toFixed(2) + ' CAD';
      document.getElementById('modalQty').textContent = 'Qty: ' + (listing.qty || 1);
      // Images
      const imgs = listing.images || [listing.image];
      document.getElementById('modalImages').innerHTML =
        imgs.map(src => `<img src="${src}" alt="" class="w-full h-24 object-cover rounded shadow" />`).join('');
      // Platforms
      document.getElementById('modalPlatforms').innerHTML =
        allPlatforms.map(platform => {
          const {icon, tip} = getPlatformStatus(listing, platform);
          return `<span class="tooltip">
            <svg class="inline w-7 h-7" aria-label="${platform}">
              <use xlink:href="#${platform.toLowerCase()}"/>
            </svg>
            <svg class="w-4 h-4 absolute -ml-6 mt-5"><use xlink:href="#${icon}"/></svg>
            <span class="tooltiptext">${platform}: ${tip}</span>
          </span>`;
        }).join('');
      document.getElementById('modalBg').classList.remove('hidden');
      document.getElementById('modalBg').classList.add('flex');
    }
    function closeModal() {
      document.getElementById('modalBg').classList.add('hidden');
      document.getElementById('modalBg').classList.remove('flex');
    }
    window.onclick = function(event) {
      if (event.target === document.getElementById('modalBg')) closeModal();
    }

    // AI SUGGESTION SIMULATION
    function aiSuggest(btn, idx) {
      // Simulate async call & show suggestion tooltip near the button
      const listing = filteredListings[idx];
      const tooltip = document.getElementById('aiSuggestionTooltip');
      tooltip.innerHTML = `
        <strong>AI Suggestions:</strong><br/>
        &bull; <span class="text-blue-800">Title:</span> "${listing.title.replace(/(\w{6,})/, '$1 (Enhanced)')}"<br/>
        &bull; <span class="text-green-700">Price:</span> $${(listing.price * 1.07).toFixed(2)}<br/>
        &bull; <span class="text-purple-700">Tags:</span> #vintage #canada #collectible<br/>
        &bull; <span class="text-pink-700">Call-to-Action:</span> "Claim this rare find today!"<br/>
        <button class="mt-2 bg-blue-600 text-white px-3 py-1 rounded shadow hover:bg-blue-700" onclick="applyAISuggestion(${idx})">Apply All</button>
      `;
      // Position tooltip
      const rect = btn.getBoundingClientRect();
      tooltip.style.top = (window.scrollY + rect.bottom + 6) + 'px';
      tooltip.style.left = (window.scrollX + rect.left - 40) + 'px';
      tooltip.classList.remove('hidden');
      setTimeout(() => tooltip.classList.add('hidden'), 4500);
    }
    function applyAISuggestion(idx) {
      // For demo, just close tooltip and show alert
      document.getElementById('aiSuggestionTooltip').classList.add('hidden');
      alert('AI suggestions applied! (Simulation)');
    }

    // Platform click handler
    function handlePlatformClick(platform) {
      alert(`Connect or manage ${platform} integration (Simulation)`);
    }

    // Dummy edit/duplicate/delete
    function editListing(idx) { alert('Edit Listing (Simulation)'); }
    function duplicateListing(idx) { alert('Duplicate Listing (Simulation)'); }
    function deleteListing(idx) {
      if (confirm('Delete this listing?')) {
        listings.splice(idx, 1);
        filterListings();
      }
    }

    // SIDEBAR COLLAPSE (mobile)
    document.getElementById('sidebar-collapse').onclick = () => {
      document.getElementById('sidebar').classList.toggle('-translate-x-64');
    };

    // INIT
    window.onload = () => {
      renderListings();
      setStatusFilter("all");
    };
  </script>
</body>
</html>
